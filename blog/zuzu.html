<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="/favicon.ico" />
    <meta name="description" content="Zuzu is a static site generator that converts all your markdown files into static html pages. It uses Github-flavoured Markdown CSS and highlight.js to beautify code snippets." />
    <meta name="publish-date" content="2022-05-29" />
    <meta name="author" content="<!-- AUTHOR -->" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />

    <title>zuzu: A Static Site Generator (SSG) | Anubhab's blogs</title>

    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/hljs.css" />
  </head>

  <body class="markdown-body">
    <div>
      <div class="f6">
        <header id="header" class="measure-wide center mt6 mb4">
          <nav>
            <div class="mb2 dib">
              <img
                src="/android-chrome-192x192.png"
                alt="logo"
                class="logo mr1"
                style="width: 25px; height: 25px; border-radius: 50%"
              />
              <a href="/current.html" title="blog" class="gray link">current</a>
              . <a href="/blog" title="blog" class="gray link active">blog</a> .
              <a href="/" title="about" class="gray link">about</a>
            </div>
            <div>
              <a href="/blog/feed.xml" title="anubhab" class="rss gray link"
                >/rss</a
              >
            </div>
          </nav>
          <h2 class="f2 lh-title mb2 mt-2">
            zuzu: A Static Site Generator (SSG)
          </h2>
          <div>
            <p>
              Zuzu is a static site generator that converts all your markdown files into static html pages. It uses Github-flavoured Markdown CSS and highlight.js to beautify code snippets.
            </p>
          </div>
          <h4 class="f4 lh-title gray">
            <!-- AUTHOR -->
          </h4>
        </header>
        <section id="main" class="page-post gray mb6 lh-copy">
          <ul class="ph0" style="list-style: none">
            <li class="pb3">
              2022-05-29
            </li>
          </ul>
          <div class="content custom">
            <p>Zuzu is a static site generator that takes in markdown files and renders HTML pages. This blog has been written using this generator. This enables noobs like me to write blogs without having to learn a lot of code ;)</p>
<ul>
<li><a href="#how-does-it-work">How does it work?</a>
<ul>
<li><a href="#1-create-a-markdown-file">1. Create a markdown file</a></li>
<li><a href="#2-run-the-generator-and-find-your-blog">2. Run the generator and find your blog</a></li>
</ul>
</li>
<li><a href="#the-static-site-generator">The Static Site Generator</a>
<ul>
<li><a href="#1-libraries-used">1. Libraries used</a></li>
<li><a href="#2-workflow">2. Workflow</a></li>
<li><a href="#3-generator-code">3. Generator Code</a></li>
</ul>
</li>
</ul>
<h2 id="how-does-it-work" tabindex="-1">How does it work?</h2>
<p>Zuzu parses the markdown file using <em>javascript</em> and renders it as <em>html documents</em>. It then saves the html files in the <code>docs</code> folder. The <code>docs</code>, is the final output of the generator and this can be deployed and hosted on various platforms. This particular blog has been deployed on Github Pages. Here is another blog built using zuzu and react for some additional feat. <a href="https://anubhavp.dev/oldblog/">Anubhab‚Äôs Blog</a></p>
<h3 id="1-create-a-markdown-file" tabindex="-1">1. Create a markdown file</h3>
<pre><code># This is a title
This is a paragraph
This is another paragraph
This is a list:
* Item 1
* Item 2
* Item 3
This is a code block:
```
print(&quot;Hello World&quot;)
```
This is a table:
| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| 1        | 2        | 3        |
| 4        | 5        | 6        |
| 7        | 8        | 9        |
This is a link: [zuzu](https://anubhavp.dev/blog/zuzu.html)
</code></pre>
<h3 id="2-run-the-generator-and-find-your-blog" tabindex="-1">2. Run the generator and find your blog</h3>
<p>Run <code>npm run generate</code> in the console. We have used GitHub-flavoured markdown in the initial setup. You may add your theme, build your css and js files and add them to the <code>static</code> folder. The <code>static</code> folder contains all the static files that are required to render the blog.</p>
<h2 id="the-static-site-generator" tabindex="-1">The Static Site Generator</h2>
<h3 id="1-libraries-used" tabindex="-1">1. Libraries used</h3>
<ul>
<li><a href="https://www.npmjs.com/package/markdown-it">MarkdownIt</a> <em>Markdown parser done right.</em></li>
<li><a href="https://www.npmjs.com/package/markdown-it-anchor">MarkdownItAnchor</a> <em>Header anchors for markdown-it.</em></li>
<li><a href="https://www.npmjs.com/package/glob">Glob</a> <em>‚ÄúGlobs‚Äù are the patterns you type when you do stuff like ls .js on the command line, or put build/ in a .gitignore file.</em></li>
<li><a href="https://www.npmjs.com/package/gray-matter">Gray-Matter</a> <em>Parse front-matter from a string or file.</em></li>
<li><a href="https://npmjs.com/package/mkdirp">Mkdirp</a> <em>Create Dirs if they do not exist.</em></li>
<li><a href="https://nodejs.org/api/path.html">Path</a> <em>Provides utilities for working with file and directory paths.</em></li>
<li><a href="https://highlightjs.org/">Highlight.js</a> <em>Highlight.js is a syntax highlighter written in JavaScript. It works in the browser as well as on the server. It works with pretty much any markup, and doesn‚Äôt depend on any framework and has automatic language detection.</em></li>
<li><a href="https://www.npmjs.com/package/md-to-pdf">MDtoPDF</a> <em>Converts markdown to pdf.</em></li>
<li><a href="https://www.npmjs.com/package/rss">RSS</a> <em>RSS parser.</em></li>
<li><a href="https://www.npmjs.com/package/cheerio">Cheerio</a> <em>Fast, flexible, and lean implementation of core jQuery designed specifically for the server.</em></li>
</ul>
<h3 id="2-workflow" tabindex="-1">2. Workflow</h3>
<p>The code referred to here is the <code>version1</code> of the generator.js. We are currently running with the <code>version3</code>. The rest of the code is in the <a href="https://github.com/fuzzymfx/zuzu">Github Repo</a>. Feel free to <a href="https://github.com/fuzzymfx/zuzu">browse</a> through the rest of the codes to explore additional features like <strong>RSS feed generation</strong>, <strong>PDF generation</strong>, <strong>search</strong> have been added to the generator.</p>
<ol>
<li><code>fs.readfile() from fs</code> reads all the files from the said directory and stores them in <code>filename</code> using <code>glob</code>. It is a <code>glob</code> that matches all the files in the directory. The <code>file system</code> module allows you to work with the file system on your computer.</li>
<li><code>gray-matter</code> helps extract front matter from the string or file.
Converts a string with front matter, like this:</li>
</ol>
<pre><code>    title: Hello
    slug: home
    ---
    &lt;h1&gt;Hello world!&lt;/h1&gt;
</code></pre>
<p>Into an object like this:</p>
<pre><code>{
content: '&lt;h1&gt;Hello world!&lt;/h1&gt;',
data: { 
    title: 'Hello', 
    slug: 'home' 
}
}
</code></pre>
<p>It then extracts the front matter and stores it in <code>data</code>. It then stores the content in <code>content</code> and returns the <code>filename</code> to the <code>main()</code> function. It then repeats the process for all the files in the directory.</p>
<ol start="3">
<li>
<p>The <code>main()</code> function then takes in one <code>filename</code> at a time and then parses it through <code>markdownit( ,{markdownitanchor})</code>. <code>markdownit</code> parses the file and converts the markdown content into HTML files. It then creates an <code>html</code> file and writes the parsed content into it. It then saves the <code>html</code> file in the <code>docs</code> folder. This process repeats for all the files in the directory.</p>
</li>
<li>
<p>The converted html files are stored in the specified directories then using <code>mkdirp</code>. The <code>index.html</code> file is already present in the <code>docs</code> folder. <code>mkdirp</code> creates the directories if they do not exist.</p>
</li>
</ol>
<h3 id="3-generator-code" tabindex="-1">3. Generator Code</h3>
<p>This is version 1 of zuzu. The current version is version 3. The code for version 3 is in the <a href="https://github.com/fuzzymfx/zuzu">Github Repo</a>. This gives you a basic idea of how the generator works.</p>
<pre><code class="language-js">
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>
<span class="hljs-keyword">import</span> glob <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;glob&#x27;</span>
<span class="hljs-keyword">import</span> matter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gray-matter&#x27;</span>
<span class="hljs-keyword">import</span> mkdirp <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;mkdirp&#x27;</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>
<span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;highlight.js&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MarkdownIt</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;markdown-it&#x27;</span>
<span class="hljs-keyword">import</span> markdownItAnchor <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;markdown-it-anchor&#x27;</span>
<span class="hljs-keyword">import</span> string <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;string&#x27;</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">slugify</span> = s =&gt; <span class="hljs-title function_">string</span>(s).<span class="hljs-title function_">slugify</span>().<span class="hljs-title function_">toString</span>()


<span class="hljs-keyword">const</span> md = <span class="hljs-title class_">MarkdownIt</span>({
    <span class="hljs-attr">html</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">linkify</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">typographer</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-title function_">highlight</span>(<span class="hljs-params">str, language</span>) {
        <span class="hljs-keyword">if</span> (language &amp;&amp; hljs.<span class="hljs-title function_">getLanguage</span>(language)) {
            <span class="hljs-keyword">try</span> {

                <span class="hljs-keyword">return</span> hljs.<span class="hljs-title function_">highlight</span>(str, { <span class="hljs-attr">language</span>: language }).<span class="hljs-property">value</span>;
            } <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}).<span class="hljs-title function_">use</span>(markdownItAnchor, { slugify });


<span class="hljs-keyword">const</span> <span class="hljs-title function_">readFile</span> = (<span class="hljs-params">filename</span>) =&gt; {
    <span class="hljs-keyword">const</span> rawFile = fs.<span class="hljs-title function_">readFileSync</span>(filename, <span class="hljs-string">&#x27;utf8&#x27;</span>)
    <span class="hljs-keyword">const</span> parsed = <span class="hljs-title function_">matter</span>(rawFile)
    <span class="hljs-keyword">const</span> html = md.<span class="hljs-title function_">render</span>(parsed.<span class="hljs-property">content</span>)

    <span class="hljs-keyword">return</span> {...parsed, html }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">templatize</span> = (<span class="hljs-params">template, { date, title, content, author }</span>) =&gt;
    template
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;!-- PUBLISH_DATE --&gt;/g</span>, date)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;!-- TITLE --&gt;/g</span>, title)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;!-- CONTENT --&gt;/g</span>, content)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;!-- AUTHOR --&gt;/g</span>, author)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveFile</span> = (<span class="hljs-params">filename, contents</span>) =&gt; {
    <span class="hljs-keyword">const</span> dir = path.<span class="hljs-title function_">dirname</span>(filename)
    mkdirp.<span class="hljs-title function_">sync</span>(dir)
    fs.<span class="hljs-title function_">writeFileSync</span>(filename, contents)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOutputFilename</span> = (<span class="hljs-params">filename, outPath</span>) =&gt; {
    <span class="hljs-keyword">const</span> basename = path.<span class="hljs-title function_">basename</span>(filename)
    <span class="hljs-keyword">const</span> newfilename = basename.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, basename.<span class="hljs-property">length</span> - <span class="hljs-number">3</span>) + <span class="hljs-string">&#x27;.html&#x27;</span>
    <span class="hljs-keyword">const</span> outfile = path.<span class="hljs-title function_">join</span>(outPath, newfilename)
    <span class="hljs-keyword">return</span> outfile
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">processFile</span> = (<span class="hljs-params">filename, template, outPath</span>) =&gt; {
    <span class="hljs-keyword">const</span> file = <span class="hljs-title function_">readFile</span>(filename)
    <span class="hljs-keyword">const</span> outfilename = <span class="hljs-title function_">getOutputFilename</span>(filename, outPath)

    <span class="hljs-keyword">const</span> templatized = <span class="hljs-title function_">templatize</span>(template, {
        <span class="hljs-attr">date</span>: file.<span class="hljs-property">data</span>.<span class="hljs-property">date</span>,
        <span class="hljs-attr">title</span>: file.<span class="hljs-property">data</span>.<span class="hljs-property">title</span>,
        <span class="hljs-attr">content</span>: file.<span class="hljs-property">html</span>,
        <span class="hljs-attr">author</span>: file.<span class="hljs-property">data</span>.<span class="hljs-property">author</span>,
    })

    <span class="hljs-title function_">saveFile</span>(outfilename, templatized)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`üìù <span class="hljs-subst">${outfilename}</span>`</span>)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> srcPath = path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;content&#x27;</span>)
    <span class="hljs-keyword">const</span> outPath = path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;docs&#x27;</span>)
    <span class="hljs-keyword">const</span> template = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;./templates/initial/template.html&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>)
    <span class="hljs-keyword">const</span> filenames = glob.<span class="hljs-title function_">sync</span>(srcPath + <span class="hljs-string">&#x27;/**/*.md&#x27;</span>)

    filenames.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">filename</span>) =&gt;</span> {
        <span class="hljs-title function_">processFile</span>(filename, template, outPath)
    })
}

<span class="hljs-title function_">main</span>()

</code></pre>

            <hr />
            <div class="footer">
              Suggestions or corrections?
              <a
                href="mailto:anubhabr50@gmail.com?subject=Here's%20a%20suggestion/feedback!&amp;body=Hello%2C%20I%20think%20you%20need%20to%20work%20on..."
                >Send me a message</a
              >.
            </div>
          </div>
        </section>
      </div>
    </div>
    <script src="/assets/js/main.js"></script>
  </body>
</html>
